<nz-layout>
  <nz-content *ngIf="note">
    <nz-breadcrumb [nzSeparator]="iconTemplate" *ngIf="breadcrumbs">
      <nz-breadcrumb-item class="link" [routerLink]="bread.url" *ngFor="let bread of breadcrumbs | slice: -5">
        {{bread.title}}
      </nz-breadcrumb-item>
    </nz-breadcrumb>
    <ng-template #iconTemplate><i nz-icon nzType="arrow-right"></i></ng-template>
    <div class="header">
      <h2 nz-typography *ngIf="note.title">{{note.title}}</h2>
      <span nz-typography routerLink="/note/{{noteId}}" class="link"><kbd>Редактировать</kbd></span>
    </div>
    <div *ngIf="note.tags">
      <nz-tag
        *ngFor="let tag of note.tags"
        nzColor="orange"
        [title]="tag.title || ''"
        routerLink="/view/{{tag.id}}"
      >
        {{tag.title}}
      </nz-tag>
    </div>
    <p nz-typography *ngIf="note.url">URL(s):
      <span nz-typography *ngFor="let url of note.url">
        <a href="{{url}}" target="_blank">
          {{url}}
          <Link />
        </a>{{note.url.length > 1 && note.url.indexOf(url) !== note.url.length - 1 ? ', ' : ''}}
      </span>
    </p>
    <div nz-typography *ngIf="note.text" [innerHTML]="displayText(note.text)"></div>

    <div class="popup-gallery">
      <a *ngFor="let photo of store.data.note.files; let i = index" [href]='photo.src'><img [src]="photo.src"></a>
    </div>
  </nz-content>
</nz-layout>
